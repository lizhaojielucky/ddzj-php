import{d as e,W as a,y as t,ab as s,o as l,k as r,f as u,e as n,w as d,F as i,l as o,ba as c,j as m,q as v,b as p,g as _,t as f,D as b,as as g,H as y,a6 as D,ac as k}from"./index.5b37717f.js";import{t as w}from"./util.920cc201.js";import{c as x}from"./goods.26d30f7c.js";import{_ as j}from"./plugin-vue_export-helper.21dcd24c.js";var C=j(e({__name:"index",setup(e){const j=a([]),C=a(0),H=a(0),M=a([]),N=a({goods_num:"",id:""}),S=e=>{const a=new Date,t=a.getMinutes(),s=a.getHours()+""+(t<=9?"0"+t:t);return e.map((e=>{const a=e.end_time.replace(":","");e.disabled=Number(s)-Number(a)>=0})),e},h=e=>{const a=[],t=(new Date).getTime();for(let s=0;s<=e;s++){const e=t+24*s*60*60*1e3,l=new Date(e).getFullYear(),r=new Date(e).getMonth()+1,u=new Date(e).getDay(),n=new Date(e).getDate();a.push({year:l,week:E(u,s),date:(r<=9?"0"+r:r)+"-"+(n<=9?"0"+n:n)})}return a},E=(e,a)=>0===a?"今天":1===a?"明天":0===e?"周日":1===e?"周一":2===e?"周二":3===e?"周三":4===e?"周四":5===e?"周五":6===e?"周六":void 0,F=e=>{k({url:e})};return t((e=>{if(e.params){const a=JSON.parse(e.params);N.value=a}})),s((()=>{(async()=>{const{appoint_time:e,order_time:a}=await x();M.value=S(e),j.value=h(a),c({key:"selectDate",success:e=>{C.value=e.data[0],H.value=e.data[1]}})})()})),(e,a)=>{const t=m,s=v;return l(),r(i,null,[u(" Header Start "),n(s,{class:"scroll-view-box","scroll-x":"true"},{default:d((()=>[(l(!0),r(i,null,o(j.value,((e,a)=>(l(),p(t,{key:a,class:b(["day text-base",{active:C.value==a}]),onClick:e=>C.value=a},{default:d((()=>[n(t,null,{default:d((()=>[_(f(e.week),1)])),_:2},1024),n(t,{class:"mt-[10rpx]"},{default:d((()=>[_(f(e.date),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1}),u(" Header End "),u(" Main Start "),n(t,{class:"time-box"},{default:d((()=>[(l(!0),r(i,null,o(M.value,((e,a)=>(l(),p(t,{key:a,class:b(["time-item",{select:H.value==a,disabled:0===C.value&&e.disabled}]),onClick:t=>((e,a)=>{if(a)return w("服务时间段已过！请选择其他时间段");H.value=e,g({key:"selectDate",data:[C.value,H.value]});const t=j.value[C.value],s=M.value[e],l={year:t.year,date:t.date,start_time:s.start_time,end_time:s.end_time};if(""==N.value.id)y("appointTime",l),D();else{const e={goodsData:N.value,appointData:l};F(`/pages/order_buy/index?params=${JSON.stringify(e)}`)}})(a,0===C.value&&e.disabled)},{default:d((()=>[_(f(e.start_time)+" - "+f(e.end_time),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),u(" Main End ")],64)}}}),[["__scopeId","data-v-1450b61c"]]);export{C as default};
