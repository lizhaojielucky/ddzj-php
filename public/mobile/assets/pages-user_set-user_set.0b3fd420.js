import{r as A,a as e,o as t,b as a,w as l,C as s,g as o,t as r,p as i,D as u,e as c,f as n,E as d,i as p,j as m,k as f,l as x,s as h,F as g,d as b,u as v,a1 as y,W as w,al as S,ab as B,y as C,P as k,ao as R,aN as I,aj as _,z as E,h as D,aO as N,n as G,ad as z,ac as M,aq as j,a5 as H}from"./index.5b37717f.js";import{_ as O}from"./u-icon.14dc2ec9.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as Y}from"./u-popup.0b900ef6.js";import{w as Q}from"./wechat.7556eef8.js";let F="data:image/jpg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjREMEQwRkY0RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjREMEQwRkY1RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEQwRDBGRjJGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEQwRDBGRjNGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYG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";var T=V({name:"u-avatar",emits:["click"],props:{bgColor:{type:String,default:"transparent"},src:{type:String,default:""},size:{type:[String,Number],default:"default"},mode:{type:String,default:"circle"},text:{type:String,default:""},imgMode:{type:String,default:"aspectFill"},index:{type:[String,Number],default:""},sexIcon:{type:String,default:"man"},levelIcon:{type:String,default:"level"},levelBgColor:{type:String,default:""},sexBgColor:{type:String,default:""},showSex:{type:Boolean,default:!1},showLevel:{type:Boolean,default:!1}},data(){return{error:!1,avatar:this.src?this.src:F}},watch:{src(A){A?(this.avatar=A,this.error=!1):(this.avatar=F,this.error=!0)}},computed:{wrapStyle(){let A={};return A.height="large"==this.size?"120rpx":"default"==this.size?"90rpx":"mini"==this.size?"70rpx":this.size+"rpx",A.width=A.height,A.flex=`0 0 ${A.height}`,A.backgroundColor=this.bgColor,A.borderRadius="circle"==this.mode?"500px":"5px",this.text&&(A.padding="0 6rpx"),A},imgStyle(){let A={};return A.borderRadius="circle"==this.mode?"500px":"5px",A},uText(){return String(this.text)[0]},uSexStyle(){let A={};return this.sexBgColor&&(A.backgroundColor=this.sexBgColor),A},uLevelStyle(){let A={};return this.levelBgColor&&(A.backgroundColor=this.levelBgColor),A}},methods:{loadError(){this.error=!0,this.avatar=F},click(){this.$emit("click",this.index)}}},[["render",function(f,x,h,g,b,v){const y=d,w=p,S=A(e("u-icon"),O),B=m;return t(),a(B,{class:"u-avatar",style:s([v.wrapStyle]),onClick:v.click},{default:l((()=>[!v.uText&&b.avatar?(t(),a(y,{key:0,onError:v.loadError,style:s([v.imgStyle]),class:"u-avatar__img",src:b.avatar,mode:h.imgMode},null,8,["onError","style","src","mode"])):v.uText?(t(),a(w,{key:1,class:"u-line-1",style:{fontSize:"38rpx"}},{default:l((()=>[o(r(v.uText),1)])),_:1})):i(f.$slots,"default",{key:2},void 0,!0),h.showSex?(t(),a(B,{key:3,class:u(["u-avatar__sex",["u-avatar__sex--"+h.sexIcon]]),style:s([v.uSexStyle])},{default:l((()=>[c(S,{name:h.sexIcon,size:"20"},null,8,["name"])])),_:1},8,["class","style"])):n("v-if",!0),h.showLevel?(t(),a(B,{key:4,class:"u-avatar__level",style:s([v.uLevelStyle])},{default:l((()=>[c(S,{name:h.levelIcon,size:"20"},null,8,["name"])])),_:1},8,["style"])):n("v-if",!0)])),_:3},8,["style","onClick"])}],["__scopeId","data-v-d5794d26"]]);var L=V({name:"u-action-sheet",emits:["update:modelValue","input","click","close"],props:{value:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},maskCloseAble:{type:Boolean,default:!0},list:{type:Array,default:()=>[]},tips:{type:Object,default:()=>({text:"",color:"",fontSize:"26"})},cancelBtn:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!1},borderRadius:{type:[String,Number],default:0},zIndex:{type:[String,Number],default:0},cancelText:{type:String,default:"取消"},labelName:{type:String,default:"text"},blur:{type:[Number,String],default:0}},computed:{valueCom(){return this.modelValue},tipsStyle(){let A={};return this.tips.color&&(A.color=this.tips.color),this.tips.fontSize&&(A.fontSize=this.tips.fontSize+"rpx"),A},itemStyle(){return A=>{let e={};return this.list[A].color&&(e.color=this.list[A].color),this.list[A].fontSize&&(e.fontSize=this.list[A].fontSize+"rpx"),this.list[A].disabled&&(e.color="#c0c4cc"),e}},uZIndex(){return this.zIndex?this.zIndex:this.$u.zIndex.popup}},data:()=>({popupValue:!1}),watch:{valueCom(A,e){this.popupValue=A}},methods:{close(){this.popupClose(),this.$emit("close")},popupClose(){this.$emit("input",!1),this.$emit("update:modelValue",!1)},itemClick(A){this.list[A].disabled||(this.$emit("click",A),this.$emit("input",!1),this.$emit("update:modelValue",!1))}}},[["render",function(i,d,b,v,y,w){const S=p,B=m,C=A(e("u-popup"),Y);return t(),a(C,{blur:b.blur,mode:"bottom","border-radius":b.borderRadius,popup:!1,modelValue:y.popupValue,"onUpdate:modelValue":d[2]||(d[2]=A=>y.popupValue=A),maskCloseAble:b.maskCloseAble,length:"auto",safeAreaInsetBottom:b.safeAreaInsetBottom,onClose:w.popupClose,"z-index":w.uZIndex},{default:l((()=>[b.tips.text?(t(),a(B,{key:0,class:"u-tips u-border-bottom",style:s([w.tipsStyle])},{default:l((()=>[c(S,null,{default:l((()=>[o(r(b.tips.text),1)])),_:1})])),_:1},8,["style"])):n("v-if",!0),(t(!0),f(g,null,x(b.list,((A,e)=>(t(),a(B,{key:e,onTouchmove:d[0]||(d[0]=h((()=>{}),["stop","prevent"])),onClick:A=>w.itemClick(e),style:s([w.itemStyle(e)]),class:u(["u-action-sheet-item u-line1",[e<b.list.length-1?"u-border-bottom":""]]),"hover-stay-time":150},{default:l((()=>[c(S,null,{default:l((()=>[o(r(A[b.labelName]),1)])),_:2},1024),A.subText?(t(),a(S,{key:0,class:"u-action-sheet-item__subtext u-line-1"},{default:l((()=>[o(r(A.subText),1)])),_:2},1024)):n("v-if",!0)])),_:2},1032,["onClick","style","class"])))),128)),b.cancelBtn?(t(),a(B,{key:1,class:"u-gab"})):n("v-if",!0),b.cancelBtn?(t(),a(B,{key:2,onTouchmove:d[1]||(d[1]=h((()=>{}),["stop","prevent"])),class:"u-actionsheet-cancel u-action-sheet-item","hover-class":"u-hover-class","hover-stay-time":150,onClick:w.close},{default:l((()=>[o(r(b.cancelText),1)])),_:1},8,["onClick"])):n("v-if",!0)])),_:1},8,["blur","border-radius","modelValue","maskCloseAble","safeAreaInsetBottom","onClose","z-index"])}],["__scopeId","data-v-2487f0c2"]]);var U=V(b({__name:"user_set",setup(s){const i=v(),u=y(),d=w({avatar:"",nickname:"",account:"",has_auth:"",has_password:""}),p=w([{text:"修改密码"},{text:"忘记密码"}]),f=w(!0);f.value=S();const x=w(!1),h=async()=>{const A=await N();d.value=A},g=A=>{switch(A){case 0:G({url:"/pages/change_password/change_password"});break;case 1:G({url:"/pages/forget_pwd/forget_pwd"})}},b=()=>{if(!d.value.has_password)return G({url:"/pages/change_password/change_password?type=set"});x.value=!0},V=A=>{G({url:A})},Y=async()=>{k({title:"请稍后..."});try{Q.getUrl()}catch(A){console.log("绑定授权报错",A)}},F=()=>{z({content:"是否退出登录？",confirmColor:"#4173FF",success:({cancel:A})=>{A||(u.logout(),M({url:"/pages/login/login"}))}})};return B((()=>{h()})),C((async A=>{const{code:e}=A;if(e){k({title:"请稍后..."}),R.set("code",e);try{await I({code:e}),_(),setTimeout((()=>{history.go(-2),h()}),500)}catch(t){throw _(),setTimeout((()=>{history.go(-2)}),500),new Error(t)}}})),E((()=>{R.remove("code")})),(s,u)=>{const h=A(e("u-avatar"),T),v=m,y=A(e("u-icon"),O),w=j,S=H,B=A(e("u-action-sheet"),L);return t(),a(v,{class:"user-set"},{default:l((()=>[c(w,{url:"/bundle/pages/user_profile/index"},{default:l((()=>[c(v,{class:"item flex bg-white mt-[20rpx]"},{default:l((()=>[c(h,{src:d.value.avatar,shape:"square",size:100},null,8,["src"]),c(v,{class:"ml-[20rpx] flex flex-1 justify-between items-center"},{default:l((()=>[c(v,null,{default:l((()=>[c(v,{class:"mb-[15rpx] text-xl font-medium"},{default:l((()=>[o(r(d.value.nickname),1)])),_:1}),c(v,{class:"text-content text-xs"},{default:l((()=>[o("账号："+r(d.value.account),1)])),_:1})])),_:1}),c(y,{name:"arrow-right",color:"#666"})])),_:1})])),_:1})])),_:1}),c(v,{class:"item bg-white mt-[20rpx] btn-border flex flex-1 justify-between",onClick:b},{default:l((()=>[c(v,{class:""},{default:l((()=>[o("登录密码")])),_:1}),c(y,{name:"arrow-right",color:"#666"})])),_:1}),f.value?(t(),a(v,{key:0,class:"item bg-white flex flex-1 justify-between",onClick:Y},{default:l((()=>[c(v,{class:""},{default:l((()=>[o("绑定微信")])),_:1}),c(v,{class:"flex justify-between"},{default:l((()=>[c(v,{class:"text-muted mr-[20rpx]"},{default:l((()=>[o(r(d.value.has_auth?"已绑定":"未绑定"),1)])),_:1}),n(' <u-icon name="arrow-right" color="#666"></u-icon> ')])),_:1})])),_:1})):n("v-if",!0),c(v,{class:"item bg-white mt-[20rpx] btn-border flex flex-1 justify-between",onClick:u[0]||(u[0]=A=>V("/bundle/pages/service_explan/index?type=1"))},{default:l((()=>[c(v,{class:""},{default:l((()=>[o("隐私政策")])),_:1}),c(y,{name:"arrow-right",color:"#666"})])),_:1}),c(v,{class:"item bg-white btn-border flex flex-1 justify-between",onClick:u[1]||(u[1]=A=>V("/bundle/pages/service_explan/index?type=2"))},{default:l((()=>[c(v,{class:""},{default:l((()=>[o("服务协议")])),_:1}),c(y,{name:"arrow-right",color:"#666"})])),_:1}),c(v,{class:"item bg-white flex flex-1 justify-between",onClick:u[2]||(u[2]=A=>V("/pages/as_us/as_us"))},{default:l((()=>[c(v,{class:""},{default:l((()=>[o("关于我们")])),_:1}),c(v,{class:"flex justify-between"},{default:l((()=>[c(v,{class:"text-muted mr-[20rpx]"},{default:l((()=>[o(" v"+r(D(i).config.version),1)])),_:1}),c(y,{name:"arrow-right",color:"#666"})])),_:1})])),_:1}),c(v,{class:"mt-[60rpx] mx-[26rpx]"},{default:l((()=>[c(S,{class:"bg-primary text-lg text-white rounded-full",onClick:F},{default:l((()=>[o(" 退出登录 ")])),_:1})])),_:1}),c(B,{list:p.value,modelValue:x.value,"onUpdate:modelValue":u[3]||(u[3]=A=>x.value=A),onClick:g,"safe-area-inset-bottom":!0},null,8,["list","modelValue"])])),_:1})}}}),[["__scopeId","data-v-148a2458"]]);export{U as default};
