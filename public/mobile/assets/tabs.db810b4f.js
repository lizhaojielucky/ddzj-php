import{d as e,W as t,bd as a,aS as s,c as l,aa as o,o as i,b as n,w as u,p as r,f as d,D as c,C as f,be as h,j as v,L as p,aA as b,e as g,x as m,a1 as y,bf as x,r as _,a as k,k as w,l as C,h as S,g as T,t as F,F as O,bb as X,n as $,R as z,q as B}from"./index.5b37717f.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as Y}from"./u-badge.eadb0f30.js";import{_ as j}from"./u-button.71edba3f.js";import{_ as N}from"./u-empty.cc6bdf05.js";import{g as R}from"./util.920cc201.js";var W=I(e({__name:"tab",props:{dot:{type:[Boolean,String],default:!1},name:{type:[Boolean,String],default:""},info:null},setup(e){const p=e,b=t(!1),g=t(!1),m=t(!1),y=t(void 0),x=a("updateTabs"),_=a("handleChange"),k=()=>{x&&x()},w=h();_(null==w?void 0:w.props,(e=>{y.value=y.value||e,b.value=e,m.value=y.value,g.value=e})),s((()=>{k()}));const C=l((()=>{const{dot:e,info:t}=p;return{dot:e,info:t}}));return o((()=>C.value),(()=>{k()})),o((()=>p.name),(e=>{k()})),(e,t)=>{const a=v;return i(),n(a,{class:c({active:b.value,inactive:!b.value,tab:!0}),style:f(g.value?"":"display: none;")},{default:u((()=>[m.value?r(e.$slots,"default",{key:0},void 0,!0):d("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-327343cc"]]);var H=I({name:"u-sticky",emits:["fixed","unfixed"],props:{offsetTop:{type:[Number,String],default:0},index:{type:[Number,String],default:""},enable:{type:Boolean,default:!0},h5NavHeight:{type:[Number,String],default:44},bgColor:{type:String,default:"#ffffff"},zIndex:{type:[Number,String],default:""}},data(){return{fixed:!1,height:"auto",stickyTop:0,elClass:this.$u.guid(),left:0,width:"auto"}},watch:{offsetTop(e){this.initObserver()},enable(e){0==e?(this.fixed=!1,this.disconnectObserver("contentObserver")):this.initObserver()}},computed:{uZIndex(){return this.zIndex?this.zIndex:this.$u.zIndex.sticky}},mounted(){this.initObserver()},methods:{initObserver(){this.enable&&(this.stickyTop=0!=this.offsetTop?p(this.offsetTop)+this.h5NavHeight:this.h5NavHeight,this.disconnectObserver("contentObserver"),this.$uGetRect("."+this.elClass).then((e=>{this.height=e.height,this.left=e.left,this.width=e.width,this.$nextTick((()=>{this.observeContent()}))})))},observeContent(){this.disconnectObserver("contentObserver");const e=b(this,{thresholds:[.95,.98,1]});e.relativeToViewport({top:-this.stickyTop}),e.observe("."+this.elClass,(e=>{this.enable&&this.setFixed(e.boundingClientRect.top)})),this.contentObserver=e},setFixed(e){const t=e<this.stickyTop;t?this.$emit("fixed",this.index):this.fixed&&this.$emit("unfixed",this.index),this.fixed=t},disconnectObserver(e){const t=this[e];t&&t.disconnect()}},beforeUnmount(){this.disconnectObserver("contentObserver")}},[["render",function(e,t,a,s,l,o){const d=v;return i(),n(d,{class:""},{default:u((()=>[g(d,{class:c(["u-sticky-wrap",[l.elClass]]),style:f({height:l.fixed?l.height+"px":"auto",backgroundColor:a.bgColor})},{default:u((()=>[g(d,{class:"u-sticky",style:f({position:l.fixed?"fixed":"static",top:l.stickyTop+"px",left:l.left+"px",width:"auto"==l.width?"auto":l.width+"px",zIndex:o.uZIndex})},{default:u((()=>[r(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["class","style"])])),_:3})}],["__scopeId","data-v-9059106a"]]);var M=I(e({__name:"tabs",props:{isScroll:{type:Boolean,default:!0},current:{default:0},height:{default:80},fontSize:{default:28},duration:{default:.3},activeColor:{default:"#2073F4"},inactiveColor:{default:"#333"},barWidth:{default:40},barHeight:{default:4},gutter:{default:30},bgColor:{default:"#FFFFFF"},name:{default:"name"},count:{default:"count"},offset:{default:[5,20]},bold:{type:Boolean,default:!0},activeItemStyle:{default:{}},showBar:{type:Boolean,default:!0},barStyle:{default:{}},itemWidth:{default:"auto"},isFixed:{type:Boolean,default:!1},top:{default:0},stickyBgColor:{default:"#FFFFFF"},swipeable:{type:Boolean,default:!0},auth:{type:Boolean,default:!1}},emits:["change"],setup(e,{emit:a}){const b=e,I=y(),W=l((()=>I.token)),{touch:M,resetTouchStatus:Z,touchStart:q,touchMove:A}=function(){const e=m({direction:"",deltaX:0,deltaY:0,offsetX:0,offsetY:0}),t=()=>{e.direction="",e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0};return{touch:e,resetTouchStatus:t,touchStart:a=>{t();const s=a.touches[0];e.startX=s.clientX,e.startY=s.clientY},touchMove:t=>{const a=t.touches[0];var s,l;e.deltaX=a.clientX-e.startX,e.deltaY=a.clientY-e.startY,e.offsetX=Math.abs(e.deltaX),e.offsetY=Math.abs(e.deltaY),e.direction=e.direction||((s=e.offsetX)>(l=e.offsetY)&&s>10?"horizontal":l>s&&l>10?"vertical":"")}}}(),D=t([]),E=t([]),G=t(0),L=t([]),U=t(0),V=t(0),J=t(0),K=t("cu-tab"),P=t(b.current),Q=t(!0),ee=t(!1),te=h();o((()=>D.value),(async(e,t)=>{Q.value||e.length===t.length||(P.value=0),await X(),oe()})),o((()=>b.current),((e,t)=>{X((()=>{P.value=e,ne()}))}),{immediate:!0});const ae=l((()=>{const e={width:b.barWidth+"rpx",transform:`translate(${V.value}px, -100%)`,"transition-duration":`${Q.value?0:b.duration}s`,"background-color":b.activeColor,height:b.barHeight+"rpx",opacity:Q.value?0:1,"border-radius":b.barHeight/2+"px"};return Object.assign(e,b.barStyle),e})),se=l((()=>e=>{let t={height:b.height+"rpx","line-height":b.height+"rpx","font-size":b.fontSize+"rpx",padding:b.isScroll?`0 ${b.gutter}rpx`:"",flex:b.isScroll?"auto":"1",width:`${b.itemWidth}rpx`};return e==P.value&&b.bold&&(t.fontWeight="bold"),e==P.value?(t.color=b.activeColor,t=Object.assign(t,b.activeItemStyle)):t.color=b.inactiveColor,t})),le=()=>{D.value=E.value.map((e=>{const{name:t,dot:a,active:s,inited:l}=e.event,{updateRender:o}=e;return{name:t,dot:a,active:s,inited:l,updateRender:o}}))},oe=async()=>{const e=await R("#"+K.value,!1,te);J.value=e.left,U.value=e.width,ie()},ie=()=>{const e=z().in(te);for(let t=0;t<D.value.length;t++)e.select(`#tab-item-${t}`).fields({size:!0,rect:!0});e.exec((e=>{L.value=e,ne()}))},ne=()=>{const e=L.value[P.value];if(!e)return;const t=e.width,a=e.left-J.value-(U.value-t)/2;G.value=a<0?0:a;const s=e.left+e.width/2-J.value;V.value=s-p(b.barWidth)/2,1==Q.value&&setTimeout((()=>{Q.value=!1}),100),E.value.forEach(((e,t)=>{const a=t===P.value;a===e.event.active&&e.event.inited||e.updateRender(a)}))},ue=e=>{b.swipeable&&(ee.value=!0,q(e))},re=e=>{b.swipeable&&ee.value&&A(e)},de=()=>{if(!b.swipeable||!ee.value)return;if("horizontal"===M.direction&&M.offsetX>=50){let e,t=D.value.length,s=P.value;e=M.deltaX<=0?s>=t-1?0:s+1:s<=0?t-1:s-1,X((()=>{P.value=e,ne()})),a("change",e)}ee.value=!1};return s((()=>{le()})),x("handleChange",((e,t)=>{E.value.push({event:e,updateRender:t})})),x("updateTabs",le),(t,s)=>{const l=_(k("u-badge"),Y),o=v,h=B,p=_(k("u-sticky"),H),b=_(k("u-button"),j),m=_(k("u-empty"),N);return i(),n(o,{class:"tabs"},{default:u((()=>[g(p,{enable:e.isFixed,"bg-color":e.stickyBgColor,"offset-top":e.top,"h5-nav-height":0},{default:u((()=>[g(o,{id:K.value,style:f({background:e.bgColor})},{default:u((()=>[g(h,{style:f({height:e.height+"rpx"}),"scroll-x":"",class:"scroll-view","scroll-left":G.value,"scroll-with-animation":""},{default:u((()=>[g(o,{class:c(["scroll-box",{"tabs-scorll-flex":!e.isScroll}])},{default:u((()=>[(i(!0),w(O,null,C(D.value,((t,s)=>(i(),n(o,{class:"tab-item line1",id:"tab-item-"+s,key:s,onClick:e=>(e=>{e!=P.value&&(X((()=>{P.value=e,ne()})),a("change",e))})(s),style:f([S(se)(s)])},{default:u((()=>[g(l,{count:t[e.count]||t.dot||0,offset:e.offset,size:"mini"},null,8,["count","offset"]),T(" "+F(t[e.name]||t.name),1)])),_:2},1032,["id","onClick","style"])))),128)),e.showBar?(i(),n(o,{key:0,class:"tab-bar",style:f([S(ae)])},null,8,["style"])):d("v-if",!0)])),_:1},8,["class"])])),_:1},8,["style","scroll-left"])])),_:1},8,["id","style"])])),_:1},8,["enable","bg-color","offset-top"]),g(o,{class:"tab-content",onTouchstart:ue,onTouchmove:re,onTouchcancel:de,onTouchend:de},{default:u((()=>[d(' <view class="tab-track" :class="{\'tab-animated\': animated}" :style="[trackStyle]"> '),g(o,null,{default:u((()=>[S(W)&&e.auth?r(t.$slots,"default",{key:0},void 0,!0):(i(),n(m,{key:1,src:"/static/images/empty/order.png",text:"您还没有登录～",mode:"data","icon-size":300,"margin-top":"300",color:"#888888"},{bottom:u((()=>[g(o,{class:"mt-4"},{default:u((()=>[g(b,{shape:"circle",onClick:s[0]||(s[0]=e=>{$({url:"/pages/login/login"})}),ripple:!0,"hair-line":!1,type:"info"},{default:u((()=>[T(" 去登录")])),_:1})])),_:1})])),_:1},8,["src"]))])),_:3}),d(" </view> ")])),_:3})])),_:3})}}}),[["__scopeId","data-v-445cc92c"]]);export{W as a,M as t};
