import{u as w,R as A,y as L,A as R,B as h}from"./element-plus.62ab1451.js";import{r as s}from"./index.7e7d93d0.js";import{P as N}from"./index.7a0b9c3a.js";import{d as S,r as d,_ as q,o as m,L as p,M as o,T as g,U as v,S as y,V as l,a as I}from"./@vue.3ddec1b2.js";function J(e){return s.get({url:"/goods.goods_unit/lists",params:e})}function M(e){return s.post({url:"/goods.goods_unit/add",params:e})}function K(e){return s.post({url:"/goods.goods_unit/del",params:e})}function O(e){return s.post({url:"/goods.goods_unit/edit",params:e})}function P(e){return s.get({url:"/goods.goods_unit/detail",params:e})}function Q(){return s.get({url:"/goods.goods_unit/commonLists"})}const $=I("div",{class:"form-tips"},"\u6570\u5B57\u8D8A\u5927\uFF0C\u6392\u5E8F\u8D8A\u9760\u524D\uFF0C\u9ED8\u8BA4\u6392\u5E8F\u53F7\u4E3A0",-1),W=S({__name:"unit-form",props:{type:{default:"add"},id:{default:""},btnText:{default:""}},emits:["refresh"],setup(e,{emit:f}){const i=e,r=d(),u=d({name:"",sort:0}),b=q({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5355\u4F4D",trigger:"blur"}]}),c=d(null),x=n=>{!n||n.resetFields()},D=()=>{i.id&&B(i.id)},B=async n=>{u.value=await P({id:n})},E=async()=>{await M({...u.value}),f("refresh")},V=async()=>{await O({...u.value,id:i.id}),f("refresh")},C=n=>{!n||n.validate(t=>{if(!t)return!1;i.id?V():E(),c.value.visible=!1})};return(n,t)=>{const U=w,k=A,F=L,_=R,T=h;return m(),p(N,{class:"mr-2 inline",ref_key:"popupRef",ref:c,async:!0,clickModalClose:!1,title:e.btnText,center:!0,onClose:t[2]||(t[2]=a=>x(r.value)),onOpen:D,onConfirm:t[3]||(t[3]=a=>C(r.value)),width:"550px"},{trigger:o(()=>[e.type==="primary"?(m(),p(U,{key:0,type:"primary"},{default:o(()=>[g(v(e.btnText),1)]),_:1})):y("",!0),e.btnText==="\u7F16\u8F91"||e.btnText==="\u65B0\u589E\u5355\u4F4D"?(m(),p(k,{key:1,type:"primary",underline:!1},{default:o(()=>[g(v(e.btnText),1)]),_:1})):y("",!0)]),default:o(()=>[l(T,{class:"unit-form",model:u.value,ref_key:"unitFormRef",ref:r,rules:b,"label-width":"80px"},{default:o(()=>[l(_,{label:"\u5355\u4F4D\u540D\u79F0",prop:"name"},{default:o(()=>[l(F,{class:"ls-input w-56",modelValue:u.value.name,"onUpdate:modelValue":t[0]||(t[0]=a=>u.value.name=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),l(_,{label:"\u6392\u5E8F",prop:"sort"},{default:o(()=>[l(F,{class:"ls-input",modelValue:u.value.sort,"onUpdate:modelValue":t[1]||(t[1]=a=>u.value.sort=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"]),$]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])}}});export{W as _,Q as a,K as b,J as c};
