import{y as w,A as U,B as M,u as N,D as T,Q as q,S as j,E as K,b as Y,W as Q,d as W,e as z,f as J}from"./element-plus.62ab1451.js";import{d as G,b as X}from"./index.7e7d93d0.js";import{d as b,r as x,o as c,c as S,a as m,W as O,aa as I,Q as Z,U as F,V as o,M as E,u as r,T as H,k as g,e as D,w as L,L as V,S as k,s as ee,a4 as ue}from"./@vue.3ddec1b2.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang.ec3e131a.js";import{K as te}from"./@element-plus.4237e19d.js";import{a as ae}from"./lists.0085008e.js";import{u as ne}from"./usePaging.0e69bc9a.js";import{a as se}from"./category.5e9d6050.js";import{P as oe}from"./index.7a0b9c3a.js";var l=(n=>(n.SHOP_PAGES="shop",n.CUSTOM_LINK="custom",n.SERVICE_LIST="goods_list",n.SERVICE_CLASSIFY="goods_classify",n))(l||{});const de={class:"shop-pages"},pe={class:"flex flex-wrap link-list"},ie=["onClick"],ce=b({__name:"shop-pages",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(n,{emit:y}){const d=x([{path:"/pages/index/index",name:"\u5546\u57CE\u9996\u9875",type:l.SHOP_PAGES},{path:"/pages/category/index",name:"\u5206\u7C7B\u9875\u9762",type:l.SHOP_PAGES},{path:"/pages/user/user",name:"\u4E2A\u4EBA\u4E2D\u5FC3",type:l.SHOP_PAGES},{path:"/bundle/pages/collection_list/index",name:"\u6211\u7684\u6536\u85CF",type:l.SHOP_PAGES},{path:"/pages/order/index",name:"\u6211\u7684\u8BA2\u5355",type:l.SHOP_PAGES},{path:"/bundle/pages/service_order/index",name:"\u8BA2\u5355\u670D\u52A1",type:l.SHOP_PAGES},{path:"/bundle/pages/contact_service/index",name:"\u8054\u7CFB\u5BA2\u670D",type:l.SHOP_PAGES},{path:"/pages/user_set/user_set",name:"\u4E2A\u4EBA\u8BBE\u7F6E",type:l.SHOP_PAGES},{path:"/pages/as_us/as_us",name:"\u5173\u4E8E\u6211\u4EEC",type:l.SHOP_PAGES},{path:"/bundle/pages/user_profile/index",name:"\u4E2A\u4EBA\u8D44\u6599",type:l.SHOP_PAGES},{path:"/bundle/pages/user_address/index",name:"\u5730\u5740\u7BA1\u7406",type:l.SHOP_PAGES},{path:"/bundle/pages/service_explan/index",name:"\u653F\u7B56\u534F\u8BAE",query:{type:"service"},type:l.SHOP_PAGES},{path:"/bundle/pages/search/index",name:"\u641C\u7D22\u9875\u9762",type:l.SHOP_PAGES},{path:"/bundle/pages/evaluate_list/index",name:"\u8BC4\u4EF7\u7BA1\u7406",type:l.SHOP_PAGES},{path:"/bundle/pages/user_wallet/user_wallet",name:"\u6211\u7684\u94B1\u5305",type:l.SHOP_PAGES}]),p=f=>{y("update:modelValue",f)};return(f,a)=>(c(),S("div",de,[m("div",pe,[(c(!0),S(O,null,I(d.value,(u,s)=>(c(),S("div",{class:Z(["link-item border border-br px-5 py-[5px] rounded-[3px] cursor-pointer mr-[10px] mb-[10px]",{"border-primary text-primary":n.modelValue.path==u.path&&n.modelValue.name==u.name}]),key:s,onClick:e=>p(u)},F(u.name),11,ie))),128))])]))}}),re={class:"custom-link px-8 mt-[30px]"},_e={class:"w-full"},me=m("div",{class:"form-tips"}," \u8BF7\u586B\u5199\u5B8C\u6574\u7684\u5E26\u6709\u201Chttps://\u201D\u6216\u201Chttp://\u201D\u7684\u94FE\u63A5\u5730\u5740\uFF0C\u94FE\u63A5\u7684\u57DF\u540D\u5FC5\u987B\u5728\u5FAE\u4FE1\u516C\u4F17\u5E73\u53F0\u8BBE\u7F6E\u4E1A\u52A1\u57DF\u540D ",-1),fe=b({__name:"custom-link",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(n,{emit:y}){const d=p=>{y("update:modelValue",{path:"/pages/webview/webview",query:{url:p},type:l.CUSTOM_LINK})};return(p,f)=>{const a=w,u=U,s=M;return c(),S("div",re,[o(s,null,{default:E(()=>[o(u,{label:"\u8DF3\u8F6C\u94FE\u63A5"},{default:E(()=>{var e;return[m("div",_e,[o(a,{"model-value":(e=n.modelValue.query)==null?void 0:e.url,placeholder:"\u8BF7\u8F93\u5165\u94FE\u63A5\u5730\u5740",onInput:d},null,8,["model-value"])]),me]}),_:1})]),_:1})])}}});const Ee={class:"flex items-center"},ye=m("span",null,"\u670D\u52A1\u641C\u7D22",-1),ve={class:"ml-4"},Se={class:"mt-4"},he={class:"flex items-center"},Ve={class:"ml-2"},xe={class:"flex justify-end"},Ce=b({__name:"service-list",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(n,{emit:y}){const d=x({name:""}),p=x(),f=t=>{p.value=t.id,console.log("row",t),y("update:modelValue",{path:`/pages/goods/index?id=${t.id}`,query:{id:t.id,name:t.name},type:l.SERVICE_LIST})},{pager:a,getLists:u,resetPage:s,resetParams:e}=ne({fetchFun:ae,params:d.value});return u(),(t,i)=>{const v=N,C=w,_=T,A=q,P=Y,B=j,$=K,R=le;return c(),S("div",null,[m("div",Ee,[ye,m("div",ve,[o(C,{modelValue:d.value.name,"onUpdate:modelValue":i[0]||(i[0]=h=>d.value.name=h)},{append:E(()=>[o(v,{icon:r(te),onClick:r(s)},null,8,["icon","onClick"])]),_:1},8,["modelValue"])])]),m("div",Se,[o($,{height:"380px",class:"mt-[20px]"},{default:E(()=>[o(B,{data:r(a).lists,style:{width:"100%"},onRowClick:f},{default:E(()=>[o(A,{"min-width":"40"},{default:E(({row:h})=>[o(_,{label:h.id,"model-value":p.value},{default:E(()=>[H("\xA0")]),_:2},1032,["label","model-value"])]),_:1}),o(A,{label:"\u670D\u52A1\u540D\u79F0","min-width":"200"},{default:E(({row:h})=>[m("div",he,[m("div",null,[o(P,{src:h.image,class:"w-[40px] h-[40px]"},null,8,["src"])]),m("span",Ve,F(h.name),1)])]),_:1}),o(A,{prop:"price",label:"\u4EF7\u683C","min-width":"100"}),o(A,{prop:"unit_desc",fixed:"right",label:"\u5355\u4F4D","min-width":"130"})]),_:1},8,["data"])]),_:1})]),m("div",xe,[o(R,{modelValue:r(a),"onUpdate:modelValue":i[1]||(i[1]=h=>g(a)?a.value=h:null),onChange:r(u),layout:"total, prev, pager, next, jumper"},null,8,["modelValue","onChange"])])])}}}),Ae=m("span",null,"\u9009\u62E9\u5206\u7C7B",-1),be=b({__name:"service-classify",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(n,{emit:y}){const d=x([]),p=x(),f=async()=>{try{const{lists:u}=await se("");d.value=u}catch(u){console.log("\u83B7\u53D6\u5206\u7C7B\u5217\u8868\uFF1A",u)}},a=()=>{var s;const u=p.value.getCheckedNodes();y("update:modelValue",{path:`/bundle/pages/category_goods_list/index?id=${(s=u[0])==null?void 0:s.data.id}`,query:{id:u[0].data.id,name:u[0].text},type:l.SERVICE_CLASSIFY})};return f(),(u,s)=>{var t;const e=Q;return c(),S("div",null,[m("div",null,[Ae,o(e,{class:"ml-4",ref_key:"cascaderRef",ref:p,"model-value":(t=n.modelValue.query)==null?void 0:t.id,options:d.value,props:{checkStrictly:!0,label:"name",value:"id",children:"sons",emitPath:!1},clearable:"",filterable:"",onChange:a},null,8,["model-value","options"])])])}}}),ge={class:"link flex"},Pe={class:"flex-1 pl-4"},ke=b({__name:"index",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(n,{emit:y}){const d=n,p=x([{name:"\u5546\u57CE\u9875\u9762",type:"index",children:[{name:"\u57FA\u7840\u9875\u9762",type:l.SHOP_PAGES,link:{}}]},{name:"\u670D\u52A1",type:"goods",children:[{name:"\u670D\u52A1\u5217\u8868",type:l.SERVICE_LIST,link:{}},{name:"\u670D\u52A1\u5206\u7C7B",type:l.SERVICE_CLASSIFY,link:{}}]},{name:"\u5176\u4ED6",type:"order",children:[{name:"\u81EA\u5B9A\u4E49\u94FE\u63A5",type:l.CUSTOM_LINK,link:{}}]}]),f=D(()=>p.value.map(e=>e.type)),a=D({get(){var e,t;return(t=(e=p.value.find(i=>i.children.find(v=>v.type==u.value)))==null?void 0:e.children.find(i=>i.type==u.value))==null?void 0:t.link},set(e){p.value.forEach(t=>{t.children.forEach(i=>{i.type==u.value&&(i.link=e)})})}}),u=x(l.SHOP_PAGES),s=e=>{u.value=e};return L(a,e=>{!e.type||y("update:modelValue",e)}),L(()=>d.modelValue,e=>{u.value=e.type,a.value=e},{immediate:!0}),(e,t)=>{const i=W,v=z,C=J;return c(),S("div",ge,[o(C,{"default-active":u.value,class:"w-[160px] min-h-[350px] link-menu",onSelect:s,"default-openeds":r(f)},{default:E(()=>[(c(!0),S(O,null,I(p.value,(_,A)=>(c(),V(v,{index:_.type,key:A},{title:E(()=>[m("span",null,F(_==null?void 0:_.name),1)]),default:E(()=>[(c(!0),S(O,null,I(_.children,(P,B)=>(c(),V(i,{key:B,index:P.type},{default:E(()=>[H(F(P.name),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"]))),128))]),_:1},8,["default-active","default-openeds"]),m("div",Pe,[r(l).SHOP_PAGES==u.value?(c(),V(ce,{key:0,modelValue:r(a),"onUpdate:modelValue":t[0]||(t[0]=_=>g(a)?a.value=_:null)},null,8,["modelValue"])):k("",!0),r(l).CUSTOM_LINK==u.value?(c(),V(fe,{key:1,modelValue:r(a),"onUpdate:modelValue":t[1]||(t[1]=_=>g(a)?a.value=_:null)},null,8,["modelValue"])):k("",!0),r(l).SERVICE_LIST==u.value?(c(),V(Ce,{key:2,modelValue:r(a),"onUpdate:modelValue":t[2]||(t[2]=_=>g(a)?a.value=_:null)},null,8,["modelValue"])):k("",!0),r(l).SERVICE_CLASSIFY==u.value?(c(),V(be,{key:3,modelValue:r(a),"onUpdate:modelValue":t[3]||(t[3]=_=>g(a)?a.value=_:null)},null,8,["modelValue"])):k("",!0)])])}}});const Fe=G(ke,[["__scopeId","data-v-7c89f819"]]),Be=b({__name:"picker",props:{modelValue:{type:Object},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:y}){const d=n,p=ee(),f=x({path:"",type:l.SHOP_PAGES}),a=()=>{y("update:modelValue",f.value)},u=D(()=>{var s,e,t,i;switch((s=d.modelValue)==null?void 0:s.type){case l.SHOP_PAGES:return d.modelValue.name;case l.CUSTOM_LINK:return(e=d.modelValue.query)==null?void 0:e.url;default:return(i=(t=d.modelValue)==null?void 0:t.query)==null?void 0:i.name}});return L(()=>d.modelValue,s=>{s!=null&&s.type&&(f.value=s)},{immediate:!0}),(s,e)=>{const t=X,i=w;return c(),S("div",{class:"link-picker flex-1",onClick:e[2]||(e[2]=v=>{var C;return!n.disabled&&((C=r(p))==null?void 0:C.open())})},[o(i,{"model-value":r(u),placeholder:"\u8BF7\u9009\u62E9\u94FE\u63A5",readonly:"",disabled:n.disabled},{suffix:E(()=>{var v;return[(v=n.modelValue)!=null&&v.path?(c(),V(t,{key:1,name:"el-icon-Close",onClick:e[0]||(e[0]=ue(C=>!n.disabled&&y("update:modelValue",{}),["stop"]))})):(c(),V(t,{key:0,name:"el-icon-ArrowRight"}))]}),_:1},8,["model-value","disabled"]),o(oe,{ref_key:"popupRef",ref:p,width:"900px",title:"\u94FE\u63A5\u9009\u62E9",onConfirm:a},{default:E(()=>[o(Fe,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=v=>f.value=v)},null,8,["modelValue"])]),_:1},512)])}}});const Ue=G(Be,[["__scopeId","data-v-6bb6abb9"]]);export{Ue as _};
