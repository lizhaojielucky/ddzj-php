import{y as K,A as X,W as Y,O as Z,P as ee,u as te,B as ae,G as le,V as oe,Q as se,t as ne,_ as ue,R as re,S as ie,T as de,b as me,c as _e}from"./element-plus.62ab1451.js";import{d as ce,e as pe,f as fe}from"./index.f66bf4be.js";import{_ as ve}from"./index.vue_vue_type_script_setup_true_lang.ec3e131a.js";import{_ as he}from"./index.vue_vue_type_script_setup_true_lang.671a53c5.js";import{f as we}from"./index.7e7d93d0.js";import{u as Fe}from"./usePaging.0e69bc9a.js";import{a as Ee}from"./area.b3d17b3b.js";import{d as ye,r as U,s as be,o as i,c as ge,V as e,M as a,a as o,u as F,T as d,O as E,L as c,U as p,S as R,k as ke,W as xe,ag as Ce,ar as Ve}from"./@vue.3ddec1b2.js";import"./@vueuse.b3730649.js";import"./lodash-es.32bc9704.js";import"./async-validator.fb49d0f5.js";import"./@element-plus.4237e19d.js";import"./dayjs.3f20994d.js";import"./axios.25713f9d.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.09c27007.js";import"./vue-router.70b81833.js";import"./pinia.4a4088b7.js";import"./css-color-function.6cac4cf2.js";import"./color.aa9d0e7b.js";import"./clone.467d5f2b.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.73f6d097.js";import"./vue-clipboard3.8191fcdc.js";import"./clipboard.e51d27f9.js";import"./echarts.db1d6bb4.js";import"./zrender.84752e5a.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.d7b1dc3a.js";const Ae={class:"flex"},Be={class:"mt-3"},De={class:"flex col-center"},Pe={class:"w-[40px] h-[40px]"},Se={class:"flex"},Ue=o("span",{class:"flex-none mr-2"},"\u5934\u50CF\uFF1A",-1),Re={class:"flex mt-2"},Te=o("span",{class:"flex-none mr-2 truncate"},"\u6635\u79F0\uFF1A",-1),Le={class:"flex mt-2"},Ne=o("span",{class:"flex-none mr-2"},"\u7F16\u53F7\uFF1A",-1),We={class:"mt-2 ml-1 truncate pointer"},$e={class:"flex"},Me={class:"flex justify-end mt-4"},Ct=ye({__name:"index",setup(Ie){const T=U(Ee),g=be(),L={checkStrictly:!0},s=U({staff_info:"",start_time:"",end_time:"",is_recommend:"",region_id:"",status:"",user:{}}),{pager:f,getLists:v,resetPage:Oe,resetParams:N}=Fe({fetchFun:ce,params:s.value}),W=()=>{N(),g.value.cascaderPanelRef.clearCheckedNodes()},$=async n=>{!n||(s.value.region_id=n[n.length-1])},M=async n=>{await we.confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F"),await pe({id:n}),v()},I=async(n,l)=>{await fe({status:n,id:l}),v()};return v(),(n,l)=>{const O=K,m=X,j=Y,_=Z,k=ee,b=te,q=ae,x=le,C=me,V=_e,G=oe,u=se,Q=ne,A=ue,B=re,z=Ce("router-link"),H=ie,y=Ve("perms"),J=de;return i(),ge(xe,null,[e(x,{shadow:"never",class:"!border-none"},{default:a(()=>[e(q,{model:s.value,inline:""},{default:a(()=>[e(m,{label:"\u5E08\u5085\u4FE1\u606F"},{default:a(()=>[e(O,{class:"ls-input",modelValue:s.value.staff_info,"onUpdate:modelValue":l[0]||(l[0]=t=>s.value.staff_info=t),placeholder:"\u8D26\u53F7/\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),e(m,{label:"\u52A0\u5165\u65F6\u95F4"},{default:a(()=>[e(he,{class:"ls-input",style:{width:"280px"},start_time:s.value.start_time,"onUpdate:start_time":l[1]||(l[1]=t=>s.value.start_time=t),end_time:s.value.end_time,"onUpdate:end_time":l[2]||(l[2]=t=>s.value.end_time=t)},null,8,["start_time","end_time"])]),_:1}),e(m,{label:"\u6240\u5728\u5730\u533A"},{default:a(()=>[e(j,{class:"w-56 ls-input",options:T.value,props:L,onChange:$,ref_key:"cascaderPanelRef",ref:g},null,8,["options"])]),_:1}),e(m,{label:"\u9996\u9875\u63A8\u8350"},{default:a(()=>[e(k,{modelValue:s.value.is_recommend,"onUpdate:modelValue":l[3]||(l[3]=t=>s.value.is_recommend=t),placeholder:"\u8BF7\u9009\u62E9",class:"ls-input"},{default:a(()=>[e(_,{label:"\u5168\u90E8",value:""}),e(_,{label:"\u63A8\u8350",value:"1"}),e(_,{label:"\u4E0D\u63A8\u8350",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"\u5E08\u5085\u72B6\u6001"},{default:a(()=>[e(k,{modelValue:s.value.status,"onUpdate:modelValue":l[4]||(l[4]=t=>s.value.status=t),placeholder:"\u8BF7\u9009\u62E9",class:"ls-input"},{default:a(()=>[e(_,{label:"\u5168\u90E8",value:""}),e(_,{label:"\u6B63\u5E38",value:"1"}),e(_,{label:"\u505C\u7528",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:a(()=>[o("div",Ae,[e(b,{type:"primary",onClick:F(v)},{default:a(()=>[d("\u67E5\u8BE2")]),_:1},8,["onClick"]),e(b,{onClick:W},{default:a(()=>[d("\u91CD\u7F6E")]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1}),e(x,{shadow:"never",class:"mt-4 !border-none"},{default:a(()=>[E((i(),c(b,{type:"primary",onClick:l[5]||(l[5]=t=>n.$router.push("edit"))},{default:a(()=>[d("\u6DFB\u52A0\u5E08\u5085")]),_:1})),[[y,["staff.staff/add"]]]),o("div",Be,[E((i(),c(H,{data:F(f).lists,style:{width:"100%"}},{default:a(()=>[e(u,{label:"\u7528\u6237\u6635\u79F0","min-width":"200"},{default:a(t=>{var r,D;return[o("div",De,[o("div",Pe,[e(C,{style:{width:"40px",height:"40px"},src:(r=t.row.user)==null?void 0:r.avatar,"preview-src-list":[(D=t.row.user)==null?void 0:D.avatar],"hide-on-click-modal":!0,"preview-teleported":!0,fit:"cover"},null,8,["src","preview-src-list"])]),e(G,{placement:"top-start",width:"200px",trigger:"hover"},{reference:a(()=>{var h;return[e(V,{content:(h=t.row.user)==null?void 0:h.nickname,placement:"top"},{default:a(()=>{var w;return[o("div",We,p((w=t.row.user)==null?void 0:w.nickname),1)]}),_:2},1032,["content"])]}),default:a(()=>{var h,w,P;return[o("div",Se,[Ue,e(C,{src:(h=t.row.user)==null?void 0:h.avatar,style:{width:"40px",height:"40px","border-radius":"50%"}},null,8,["src"])]),o("div",Re,[Te,e(V,{content:(w=t.row.user)==null?void 0:w.nickname,placement:"top"},{default:a(()=>{var S;return[o("span",null,p((S=t.row.user)==null?void 0:S.nickname),1)]}),_:2},1032,["content"])]),o("div",Le,[Ne,o("span",null,p((P=t.row.user)==null?void 0:P.sn),1)])]}),_:2},1024)])]}),_:1}),e(u,{property:"name",label:"\u5E08\u5085\u59D3\u540D","min-width":"120"}),e(u,{property:"mobile",label:"\u624B\u673A\u53F7\u7801","min-width":"160"}),e(u,{label:"\u6240\u5728\u5730\u533A","min-width":"200"},{default:a(t=>[o("div",null,p(t.row.province)+p(t.row.city)+p(t.row.district),1)]),_:1}),e(u,{label:"\u72B6\u6001","min-width":"80"},{default:a(t=>[E(e(Q,{modelValue:t.row.status,"onUpdate:modelValue":r=>t.row.status=r,"active-value":1,"inactive-value":0,onChange:r=>I(r,t.row.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[y,["staff.staff/status"]]])]),_:1}),e(u,{property:"recommend_desc",label:"\u9996\u9875\u63A8\u8350","min-width":"160"},{default:a(t=>[t.row.is_recommend==0?(i(),c(A,{key:0,type:"info"},{default:a(()=>[d("\u4E0D\u63A8\u8350")]),_:1})):R("",!0),t.row.is_recommend==1?(i(),c(A,{key:1},{default:a(()=>[d("\u63A8\u8350")]),_:1})):R("",!0)]),_:1}),e(u,{property:"create_time",label:"\u6DFB\u52A0\u65F6\u95F4","min-width":"180"}),e(u,{label:"\u64CD\u4F5C","min-width":"148",fixed:"right"},{default:a(t=>[o("div",$e,[E((i(),c(z,{class:"mr-2",to:{path:"edit",query:{id:t.row.id}}},{default:a(()=>[e(B,{type:"primary",underline:!1},{default:a(()=>[d("\u7F16\u8F91")]),_:1})]),_:2},1032,["to"])),[[y,["staff.staff/edit"]]]),E((i(),c(B,{class:"ml-4",type:"primary",underline:!1,onClick:r=>M(t.row.id)},{default:a(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[y,["staff.staff/del"]]])])]),_:1})]),_:1},8,["data"])),[[J,F(f).loading]])]),o("div",Me,[e(ve,{modelValue:F(f),"onUpdate:modelValue":l[6]||(l[6]=t=>ke(f)?f.value=t:null),onChange:F(v)},null,8,["modelValue","onChange"])])]),_:1})],64)}}});export{Ct as default};
