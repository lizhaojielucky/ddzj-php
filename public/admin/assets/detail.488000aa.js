import{X as z,G as J,A as K,B as Y,u as Z,W as ee,O as te,P as ae,Q as se,S as le,b as oe}from"./element-plus.62ab1451.js";import{u as ue}from"./vue-router.70b81833.js";import{O as ne,a as ie,b as R,c as re}from"./operation.9d245aad.js";import{a as de}from"./area.b3d17b3b.js";import{f as T}from"./index.7e7d93d0.js";import{d as ce,r as v,j as _e,o as u,c as r,V as e,M as a,a as s,U as l,L as N,T as B,S as h,W as me,aa as ve}from"./@vue.3ddec1b2.js";import"./@vueuse.b3730649.js";import"./lodash-es.32bc9704.js";import"./async-validator.fb49d0f5.js";import"./@element-plus.4237e19d.js";import"./dayjs.3f20994d.js";import"./axios.25713f9d.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.7a0b9c3a.js";import"./lodash.09c27007.js";import"./pinia.4a4088b7.js";import"./css-color-function.6cac4cf2.js";import"./color.aa9d0e7b.js";import"./clone.467d5f2b.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.73f6d097.js";import"./vue-clipboard3.8191fcdc.js";import"./clipboard.e51d27f9.js";import"./echarts.db1d6bb4.js";import"./zrender.84752e5a.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.d7b1dc3a.js";const pe={class:"order-detail-main"},fe=s("div",{class:"card-header"},[s("span",{class:"font-medium nr"},"\u8BA2\u5355\u4FE1\u606F")],-1),he={class:"content text-warning"},be={class:"content"},Fe={class:"content"},ye={class:"content"},Ee={class:"content"},ge={class:"content"},we={class:"content"},De={class:"content"},Be={class:"content"},xe={class:"content"},Ce={key:0,class:"warning"},ke={key:1},Ae={class:"content"},Se={class:"content"},Ve={class:"button-group"},$e=s("span",{class:"font-medium nr"},"\u670D\u52A1\u5E08\u5085",-1),Oe={key:0},Re={key:0},Te={key:1,class:"flex items-center"},Ne={class:"flex items-center"},Le={class:"ml-2"},Me={key:2,class:"flex items-center"},je={class:"flex items-center"},Ie={class:"ml-2"},Pe={key:1,class:"flex items-center"},Ue={class:"flex items-center"},We={class:"ml-2"},qe=s("span",{class:"font-medium nr"},"\u9884\u7EA6\u4FE1\u606F",-1),Ge={class:"content"},He={class:"content"},Qe={class:"content"},Xe={class:"content"},ze=s("span",{class:"font-medium nr"},"\u670D\u52A1\u4FE1\u606F",-1),Je={class:"flex items-center"},Ke={class:"justify-center ml-2"},Ye=s("span",{class:"font-medium nr"},"\u8BA2\u5355\u65E5\u5FD7",-1),Tt=ce({__name:"detail",setup(Ze){const L=ue(),x=v(L.query.id),t=v({}),y=v([]),p=v(""),E=v(null),d=v(0),C=v({}),M=v(de),j={checkStrictly:!0},b=async()=>{t.value=await ie({id:x.value});const n=await R(t.value);y.value=n.filter(c=>{var g;return(c==null?void 0:c.id)!==((g=t.value.staff)==null?void 0:g.id)}),console.log(y.value)},I=n=>(C.value=n,n),P=async n=>{E.value=n[n.length-1],y.value=await R({region_id:E.value})},U=async()=>{b(),d.value=1},W=async()=>{if(console.log("000:",E.value,C.value),E.value){if(!p.value){T.msgError("\u8BF7\u9009\u62E9\u5E08\u5085");return}}else{T.msgError("\u8BF7\u9009\u62E9\u5730\u533A");return}await re({id:t.value.id,staff_id:C.value.id}),d.value=2,p.value="",b()},q=()=>{d.value=1,p.value=""},G=()=>{d.value=2,p.value="",b()};return x.value&&b(),_e(()=>{setTimeout(()=>{t.value.staff&&t.value.order_status==1&&(d.value=2)},200)}),(n,c)=>{const g=z,f=J,o=K,k=Y,w=Z,H=ee,D=oe,Q=te,X=ae,_=se,A=le;return u(),r("div",null,[e(f,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[e(g,{content:"\u8BA2\u5355\u8BE6\u60C5",onBack:c[0]||(c[0]=i=>n.$router.back())})]),_:1}),s("div",pe,[e(f,{class:"!border-none mt-4",shadow:"never",style:{padding:"0 20px"}},{header:a(()=>[fe]),default:a(()=>[e(k,{inline:!0,model:t.value,"label-width":"auto"},{default:a(()=>[e(o,{label:"\u8BA2\u5355\u72B6\u6001: "},{default:a(()=>[s("div",he,l(t.value.order_status_desc||"-"),1)]),_:1}),e(o,{label:"\u652F\u4ED8\u72B6\u6001: "},{default:a(()=>[s("div",be,l(t.value.pay_status_desc||"-"),1)]),_:1}),e(o,{label:"\u8BA2\u5355\u7F16\u53F7: "},{default:a(()=>[s("div",Fe,l(t.value.sn||"-"),1)]),_:1}),e(o,{label:"\u652F\u4ED8\u65B9\u5F0F: "},{default:a(()=>[s("div",ye,l(t.value.pay_way_desc||"-"),1)]),_:1}),e(o,{label:"\u4E0B\u5355\u65F6\u95F4: "},{default:a(()=>[s("div",Ee,l(t.value.create_time||"-"),1)]),_:1}),e(o,{label:"\u652F\u4ED8\u65F6\u95F4: "},{default:a(()=>[s("div",ge,l(t.value.pay_time||"-"),1)]),_:1}),e(o,{label:"\u7528\u6237\u6635\u79F0: "},{default:a(()=>{var i,F;return[s("div",we,l(((F=(i=t.value)==null?void 0:i.user)==null?void 0:F.nickname)||"-"),1)]}),_:1}),e(o,{label:"\u7528\u6237\u5907\u6CE8: "},{default:a(()=>[s("div",De,l(t.value.user_remark||"-"),1)]),_:1}),e(o,{label:"\u6838\u9500\u7801: "},{default:a(()=>[s("div",Be,l(t.value.verification_code||"-"),1)]),_:1}),e(o,{label:"\u6838\u9500\u72B6\u6001: "},{default:a(()=>[s("div",xe,[t.value.verification_status_desc?(u(),r("span",Ce,l(t.value.verification_status_desc),1)):(u(),r("span",ke,"-"))])]),_:1}),e(o,{label:"\u5B8C\u6210\u65F6\u95F4: "},{default:a(()=>[s("div",Ae,l(t.value.finish_time||"-"),1)]),_:1}),e(o,{label:"\u5546\u5BB6\u5907\u6CE8: "},{default:a(()=>[s("div",Se,l(t.value.order_remarks||"-"),1)]),_:1})]),_:1},8,["model"]),s("div",Ve,[e(ne,{btnStyle:"primary",id:x.value,cancel_btn:t.value.cancel_btn,verification_btn:t.value.verification_btn,verification_status:t.value.verification_status,onRefresh:b},null,8,["id","cancel_btn","verification_btn","verification_status"])])]),_:1}),t.value.order_status!==0?(u(),N(f,{key:0,class:"!border-none mt-4",shadow:"never",style:{padding:"0 20px"}},{header:a(()=>[$e]),default:a(()=>[e(k,{inline:!0,model:t.value,"label-width":"auto"},{default:a(()=>[e(o,{label:"\u670D\u52A1\u5E08\u5085"},{default:a(()=>{var i,F,S,V,$,O;return[t.value.order_status==1?(u(),r("div",Oe,[!t.value.staff&&d.value==0?(u(),r("div",Re,[e(w,{type:"primary",onClick:U},{default:a(()=>[B("\u6307\u6D3E\u5E08\u5085")]),_:1})])):h("",!0),d.value==1?(u(),r("div",Te,[e(H,{options:M.value,props:j,onChange:P},null,8,["options"]),e(X,{modelValue:p.value,"onUpdate:modelValue":c[1]||(c[1]=m=>p.value=m),class:"mx-2","value-key":"id",onChange:I},{default:a(()=>[(u(!0),r(me,null,ve(y.value,m=>(u(),N(Q,{key:m.id,label:m.name,value:m},{default:a(()=>[s("div",Ne,[e(D,{style:{width:"30px",height:"30px","border-radius":"50%"},src:m.user.avatar,fit:"cover"},null,8,["src"]),s("div",Le,l(`${m.name}\uFF08${m.user.account}\uFF09`),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),e(w,{onClick:G},{default:a(()=>[B("\u53D6\u6D88")]),_:1}),e(w,{type:"primary",onClick:W},{default:a(()=>[B("\u786E\u8BA4\u6307\u6D3E")]),_:1})])):h("",!0),d.value==2?(u(),r("div",Me,[s("div",je,[e(D,{style:{width:"44px",height:"44px","border-radius":"50%"},src:(i=t.value.staff)==null?void 0:i.user_image,fit:"cover"},null,8,["src"]),s("div",Ie,l(`${(F=t.value.staff)==null?void 0:F.name}\uFF08${(S=t.value.staff)==null?void 0:S.mobile}\uFF09`),1)]),e(w,{type:"primary",onClick:q},{default:a(()=>[B("\u91CD\u65B0\u6307\u6D3E")]),_:1})])):h("",!0)])):h("",!0),t.value.staff&&t.value.order_status!==1?(u(),r("div",Pe,[s("div",Ue,[e(D,{style:{width:"44px",height:"44px","border-radius":"50%"},src:(V=t.value.staff)==null?void 0:V.user_image,fit:"cover"},null,8,["src"]),s("div",We,l(`${($=t.value.staff)==null?void 0:$.name}\uFF08${(O=t.value.staff)==null?void 0:O.mobile}\uFF09`),1)])])):h("",!0)]}),_:1})]),_:1},8,["model"])]),_:1})):h("",!0),e(f,{class:"!border-none mt-4",shadow:"never",style:{padding:"0 20px"}},{header:a(()=>[qe]),default:a(()=>[e(k,{inline:!0,model:t.value,"label-width":"auto"},{default:a(()=>[e(o,{label:"\u9884\u7EA6\u65F6\u95F4: "},{default:a(()=>[s("div",Ge,l(t.value.appoint_time||"-")+" "+l(t.value.appoint_week||"-")+" "+l(t.value.door_time||"-"),1)]),_:1}),e(o,{label:"\u8054\u7CFB\u4EBA: "},{default:a(()=>[s("div",He,l(t.value.contact||"-"),1)]),_:1}),e(o,{label:"\u624B\u673A\u53F7\u7801: "},{default:a(()=>[s("div",Qe,l(t.value.mobile||"-"),1)]),_:1}),e(o,{label:"\u9884\u7EA6\u5730\u5740: "},{default:a(()=>[s("div",Xe,l(t.value.address||"-"),1)]),_:1})]),_:1},8,["model"])]),_:1}),e(f,{class:"!border-none mt-4",shadow:"never",style:{padding:"0 20px"}},{header:a(()=>[ze]),default:a(()=>[e(A,{ref:"tableDataRef",data:t.value.order_goods,style:{width:"100%"}},{default:a(()=>[e(_,{label:"\u670D\u52A1\u540D\u79F0",width:"400"},{default:a(i=>[s("div",Je,[e(D,{style:{width:"58px",height:"58px"},src:i.row.goods_image,fit:"cover"},null,8,["src"]),s("div",Ke,l(i.row.goods_name),1)])]),_:1}),e(_,{property:"goods_price",label:"\u4EF7\u683C",width:"300"}),e(_,{property:"unit_name",label:"\u5355\u4F4D",width:"300"}),e(_,{property:"goods_num",label:"\u6570\u91CF",width:"300"}),e(_,{property:"total_pay_price",label:"\u5B9E\u4ED8\u91D1\u989D",width:"120",fixed:"right"})]),_:1},8,["data"])]),_:1}),e(f,{class:"!border-none mt-4",shadow:"never",style:{padding:"0 20px"}},{header:a(()=>[Ye]),default:a(()=>[e(A,{ref:"tableDataRef",data:t.value.order_log,style:{width:"100%"}},{default:a(()=>[e(_,{property:"operator",label:"\u64CD\u4F5C\u4EBA","max-width":"300"}),e(_,{property:"channel_desc",label:"\u64CD\u4F5C\u4E8B\u4EF6","max-width":"300"}),e(_,{property:"create_time",label:"\u64CD\u4F5C\u65F6\u95F4","max-width":"300"})]),_:1},8,["data"])]),_:1})])])}}});export{Tt as default};
