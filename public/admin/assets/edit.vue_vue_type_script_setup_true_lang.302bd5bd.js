import{y as O,A as P,Y as I,O as T,P as W,t as Y,B as z}from"./element-plus.62ab1451.js";import{_ as G}from"./picker.f4c7e29a.js";import{P as H}from"./index.7a0b9c3a.js";import{r as J}from"./role.bb62891e.js";import{r as m}from"./index.7e7d93d0.js";import{d as K}from"./department.c6130f39.js";import{c as Q}from"./post.76ce4967.js";import{d as X,s as C,r as Z,e as $,_ as b,o as r,c as V,V as o,M as t,a as B,W as y,aa as A,L as p,S as D,u as ee}from"./@vue.3ddec1b2.js";function ce(d){return m.get({url:"/auth.admin/lists",params:d})}function le(d){return m.post({url:"/auth.admin/add",params:d})}function ue(d){return m.post({url:"/auth.admin/edit",params:d})}function _e(d){return m.post({url:"/auth.admin/delete",params:d})}const oe={class:"edit-popup"},ae=B("div",{class:"form-tips"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A100*100px\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F",-1),fe=X({__name:"edit",emits:["success","close"],setup(d,{expose:k,emit:v}){const E=C(),c=C(),_=Z("add"),x=$(()=>_.value=="edit"?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458"),l=b({id:"",account:"",name:"",dept_id:"",jobs_id:"",role_id:"",avatar:"",password:"",password_confirm:"",disable:0,multipoint_login:1,root:0}),U=b({account:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],role_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272",trigger:["blur"]}]}),n=b({role:[],dept:[],jobs:[]}),j=()=>{J({page_type:0}).then(a=>{n.role=a.lists}),K({page_type:0}).then(a=>{n.dept=a}),Q({page_type:0}).then(a=>{n.jobs=a.lists})},h=async()=>{var a,e;await((a=E.value)==null?void 0:a.validate()),_.value=="edit"?await ue(l):await le(l),(e=c.value)==null||e.close(),v("success")},L=(a="add")=>{var e;_.value=a,(e=c.value)==null||e.open()},R=a=>{for(const e in l)a[e]!=null&&a[e]!=null&&(l[e]=a[e])},S=()=>{v("close")};return j(),k({open:L,setFormData:R}),(a,e)=>{const i=O,s=P,q=G,M=I,f=T,g=W,w=Y,N=z;return r(),V("div",oe,[o(H,{ref_key:"popupRef",ref:c,title:ee(x),async:!0,width:"550px",clickModalClose:!0,onConfirm:h,onClose:S},{default:t(()=>[o(N,{ref_key:"formRef",ref:E,model:l,"label-width":"84px",rules:U},{default:t(()=>[o(s,{label:"\u8D26\u53F7",prop:"account"},{default:t(()=>[o(i,{modelValue:l.account,"onUpdate:modelValue":e[0]||(e[0]=u=>l.account=u),disabled:l.root==1,placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue","disabled"])]),_:1}),o(s,{label:"\u5934\u50CF"},{default:t(()=>[B("div",null,[B("div",null,[o(q,{modelValue:l.avatar,"onUpdate:modelValue":e[1]||(e[1]=u=>l.avatar=u),limit:1},null,8,["modelValue"])]),ae])]),_:1}),o(s,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[o(i,{modelValue:l.name,"onUpdate:modelValue":e[2]||(e[2]=u=>l.name=u),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"dept_id"},{default:t(()=>[o(M,{class:"flex-1",modelValue:l.dept_id,"onUpdate:modelValue":e[3]||(e[3]=u=>l.dept_id=u),data:n.dept,clearable:"","node-key":"id",props:{value:"id",label:"name",disabled(u){return u.status!==1}},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data","props"])]),_:1}),o(s,{label:"\u5C97\u4F4D",prop:"dept_id"},{default:t(()=>[o(g,{class:"flex-1",modelValue:l.jobs_id,"onUpdate:modelValue":e[4]||(e[4]=u=>l.jobs_id=u),placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D"},{default:t(()=>[(r(!0),V(y,null,A(n.jobs,(u,F)=>(r(),p(f,{key:F,label:u.name,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"\u89D2\u8272",prop:"role_id"},{default:t(()=>[o(g,{modelValue:l.role_id,"onUpdate:modelValue":e[5]||(e[5]=u=>l.role_id=u),disabled:l.root==1,class:"flex-1",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},{default:t(()=>[l.root==1?(r(),p(f,{key:0,label:"\u7CFB\u7EDF\u7BA1\u7406\u5458",value:0})):D("",!0),(r(!0),V(y,null,A(n.role,(u,F)=>(r(),p(f,{key:F,label:u.name,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(s,{label:"\u5BC6\u7801",prop:"password"},{default:t(()=>[o(i,{modelValue:l.password,"onUpdate:modelValue":e[6]||(e[6]=u=>l.password=u),modelModifiers:{trim:!0},"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"password_confirm"},{default:t(()=>[o(i,{modelValue:l.password_confirm,"onUpdate:modelValue":e[7]||(e[7]=u=>l.password_confirm=u),modelModifiers:{trim:!0},"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),l.root!=1?(r(),p(s,{key:0,label:"\u7BA1\u7406\u5458\u72B6\u6001"},{default:t(()=>[o(w,{modelValue:l.disable,"onUpdate:modelValue":e[8]||(e[8]=u=>l.disable=u),"active-value":0,"inactive-value":1},null,8,["modelValue"])]),_:1})):D("",!0),o(s,{label:"\u591A\u5904\u767B\u5F55"},{default:t(()=>[o(w,{modelValue:l.multipoint_login,"onUpdate:modelValue":e[9]||(e[9]=u=>l.multipoint_login=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{fe as _,ue as a,_e as b,ce as c};
