import{y as J,A as K,W as X,u as Y,B as Z,G as ee,v as te,w as oe,Q as ae,_ as le,R as se,S as ue,T as ne,b as ie,c as re}from"./element-plus.62ab1451.js";import{a as de,e as me,f as ce}from"./lists.0085008e.js";import{c as pe}from"./category.5e9d6050.js";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang.ec3e131a.js";import{f as D,d as fe}from"./index.7e7d93d0.js";import{u as ve}from"./usePaging.0e69bc9a.js";import{S as ge}from"./modeEnum.bffc6b2c.js";import{d as Ce,r as C,o as s,c as $,V as o,M as a,a as d,u as m,T as u,W as ye,aa as Ee,O as c,L as n,U as k,S as L,k as he,ag as Fe,ar as be}from"./@vue.3ddec1b2.js";import"./@vueuse.b3730649.js";import"./lodash-es.32bc9704.js";import"./async-validator.fb49d0f5.js";import"./@element-plus.4237e19d.js";import"./dayjs.3f20994d.js";import"./axios.25713f9d.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.09c27007.js";import"./vue-router.70b81833.js";import"./pinia.4a4088b7.js";import"./css-color-function.6cac4cf2.js";import"./color.aa9d0e7b.js";import"./clone.467d5f2b.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.73f6d097.js";import"./vue-clipboard3.8191fcdc.js";import"./clipboard.e51d27f9.js";import"./echarts.db1d6bb4.js";import"./zrender.84752e5a.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.d7b1dc3a.js";const we={class:"lists"},De={class:"m-l-20"},ke={class:"mt-2"},Be={class:"mt-4"},Ae={class:"flex items-center"},Ve={class:"w-[60px] h-[60px]"},xe={class:"ml-2 truncate"},Se={class:"flex items-center"},Te={class:"mr-4"},$e={class:"flex justify-end mt-4"},Le=Ce({__name:"index",setup(Ne){const N=C(ge),i=C({name:"",status:"",first_id:"",second_id:""}),{pager:f,getLists:y,resetPage:B,resetParams:P}=ve({fetchFun:de,params:i.value}),p=C([]),A=C([]),V=C(),U=l=>{console.log("val",l),l.forEach((e,v)=>{console.log(v)}),p.value=l.map(e=>e.id)},E=async(l,e)=>{e=e===0?1:0,l=Array.isArray(l)?l:[l],e===0?await D.confirm("\u786E\u8BA4\u6279\u91CF\u653E\u5165\u4ED3\u5E93\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\u3002"):e===1&&await D.confirm("\u786E\u8BA4\u6279\u91CF\u4E0A\u67B6\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\u3002"),await me({ids:l,status:e}),y()},x=async(l,e)=>{l=Array.isArray(l)?l:[l],await D.confirm(`${e==="single"?"":"\u6279\u91CF"}\u786E\u8BA4\u5220\u9664\uFF1F\u8BF7\u8C28\u614E\u64CD\u4F5C\u3002`),await ce({ids:l}),y()},I=async()=>{const l=await pe();A.value=l},R=()=>{var e,v;const l=V.value.getCheckedNodes();i.value.first_id=(e=l[0])==null?void 0:e.pathValues[0],i.value.second_id=(v=l[0])==null?void 0:v.pathValues[1]};return y(),I(),(l,e)=>{const v=J,h=K,M=X,g=Y,W=Z,S=ee,j=te,q=oe,r=ae,G=ie,O=re,T=le,F=se,Q=Fe("router-link"),z=ue,_=be("perms"),H=ne;return s(),$("div",we,[o(S,{shadow:"never",class:"!border-none"},{default:a(()=>[o(W,{model:i.value,inline:""},{default:a(()=>[o(h,{label:"\u670D\u52A1\u540D\u79F0"},{default:a(()=>[o(v,{class:"ls-input",modelValue:i.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value.name=t),placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(h,{label:"\u670D\u52A1\u5206\u7C7B"},{default:a(()=>[o(M,{ref_key:"cascaderRef",ref:V,class:"ls-input",modelValue:i.value.first_id,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value.first_id=t),options:A.value,props:{checkStrictly:!0,label:"name",value:"id",children:"sons",emitPath:!1},clearable:"",filterable:"",onChange:R},null,8,["modelValue","options"])]),_:1}),o(h,null,{default:a(()=>[d("div",De,[o(g,{type:"primary",onClick:m(B)},{default:a(()=>[u("\u67E5\u8BE2")]),_:1},8,["onClick"]),o(g,{onClick:m(P)},{default:a(()=>[u("\u91CD\u7F6E")]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["model"])]),_:1}),o(S,{shadow:"never",class:"mt-4 !border-none"},{default:a(()=>[o(q,{class:"-mt-2",modelValue:i.value.status,"onUpdate:modelValue":e[2]||(e[2]=t=>i.value.status=t),onTabChange:m(B)},{default:a(()=>[(s(!0),$(ye,null,Ee(m(f).extend,(t,b,w)=>(s(),n(j,{key:w,label:`${N.value[b]}(${t})`,name:w||""},null,8,["label","name"]))),128))]),_:1},8,["modelValue","onTabChange"]),d("div",ke,[c((s(),n(g,{type:"primary",onClick:e[3]||(e[3]=t=>l.$router.push("lists/edit"))},{default:a(()=>[u("\u6DFB\u52A0\u670D\u52A1")]),_:1})),[[_,["goods.goods/add"]]]),c((s(),n(g,{onClick:e[4]||(e[4]=t=>E(p.value,0)),disabled:!p.value.length},{default:a(()=>[u(" \u6279\u91CF\u4E0A\u67B6 ")]),_:1},8,["disabled"])),[[_,["goods.goods/status"]]]),c((s(),n(g,{onClick:e[5]||(e[5]=t=>E(p.value,1)),disabled:!p.value.length},{default:a(()=>[u(" \u6279\u91CF\u4E0B\u67B6 ")]),_:1},8,["disabled"])),[[_,["goods.goods/status"]]]),c((s(),n(g,{onClick:e[6]||(e[6]=t=>x(p.value,"multiple")),disabled:!p.value.length},{default:a(()=>[u(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])),[[_,["goods.goods/del"]]])]),d("div",Be,[c((s(),n(z,{ref:"tableData",data:m(f).lists,style:{width:"100%"},onSelectionChange:U},{default:a(()=>[o(r,{type:"selection","max-width":"55"}),o(r,{property:"name",label:"\u670D\u52A1\u540D\u79F0","min-width":"260"},{default:a(t=>[d("div",Ae,[d("div",Ve,[o(G,{style:{width:"60px",height:"60px"},src:t.row.image,"preview-src-list":[t.row.image],"hide-on-click-modal":!0,"preview-teleported":!0,fit:"contain"},null,8,["src","preview-src-list"])]),o(O,{content:t.row.name,placement:"top"},{default:a(()=>[d("div",xe,k(t.row.name),1)]),_:2},1032,["content"])])]),_:1}),o(r,{property:"category_desc",label:"\u670D\u52A1\u5206\u7C7B","min-width":"145"}),o(r,{property:"price",label:"\u4EF7\u683C","min-width":"120"},{default:a(t=>[u(" \xA5"+k(t.row.price),1)]),_:1}),o(r,{property:"unit_desc",label:"\u5355\u4F4D","min-width":"120"}),o(r,{property:"order_num",label:"\u9884\u7EA6\u4EBA\u6570","min-width":"120"}),o(r,{property:"status_desc",label:"\u9500\u552E\u72B6\u6001","min-width":"100"},{default:a(t=>[t.row.status==1?(s(),n(T,{key:0,type:"success"},{default:a(()=>[u("\u9500\u552E\u4E2D")]),_:1})):L("",!0),t.row.status==0?(s(),n(T,{key:1,type:"info"},{default:a(()=>[u("\u4ED3\u5E93\u4E2D")]),_:1})):L("",!0)]),_:1}),o(r,{property:"sort",label:"\u6392\u5E8F","min-width":"90"}),o(r,{property:"create_time",label:"\u6DFB\u52A0\u65F6\u95F4","min-width":"180"}),o(r,{property:"address",label:"\u64CD\u4F5C",width:"180",fixed:"right"},{default:a(t=>[d("div",Se,[c((s(),n(Q,{class:"mr-4",to:{path:"lists/edit",query:{id:t.row.id}}},{default:a(()=>[o(F,{type:"primary",underline:!1},{default:a(()=>[u("\u7F16\u8F91")]),_:1})]),_:2},1032,["to"])),[[_,["goods.goods/edit"]]]),d("div",Te,[c((s(),n(F,{type:"primary",underline:!1,onClick:b=>E(t.row.id,t.row.status)},{default:a(()=>[u(k(t.row.status?"\u653E\u5165\u4ED3\u5E93":"\u7ACB\u5373\u4E0A\u67B6"),1)]),_:2},1032,["onClick"])),[[_,["goods.goods/status"]]])]),c((s(),n(F,{type:"danger",underline:!1,onClick:b=>x(t.row.id,"single")},{default:a(()=>[u("\u5220\u9664")]),_:2},1032,["onClick"])),[[_,["goods.goods/del"]]])])]),_:1})]),_:1},8,["data"])),[[H,m(f).loading]])]),d("div",$e,[o(_e,{modelValue:m(f),"onUpdate:modelValue":e[7]||(e[7]=t=>he(f)?f.value=t:null),onChange:m(y)},null,8,["modelValue","onChange"])])]),_:1})])}}});const yt=fe(Le,[["__scopeId","data-v-c8563b09"]]);export{yt as default};
