import{Y as x,A as R,y as U,a0 as h,t as L,B as N}from"./element-plus.62ab1451.js";import{d as S,a as I,b as M}from"./department.c6130f39.js";import{P as q}from"./index.7a0b9c3a.js";import{d as P,s as E,r as f,e as T,_ as O,o as _,c as Y,V as l,M as a,L as $,S as j,a as F,u as z}from"./@vue.3ddec1b2.js";const G={class:"edit-popup"},H=F("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),ee=P({__name:"edit",emits:["success","close"],setup(J,{expose:V,emit:p}){const c=E(),r=E(),n=f([]),i=f("add"),v=T(()=>i.value=="edit"?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),u=O({id:"",pid:"",name:"",leader:"",mobile:"",sort:0,status:1}),D={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:["blur","change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:["blur"]},{validator:(t,e,d)=>{/^[^\s]*$/.test(e)?d():d(new Error("\u540D\u79F0\u4E0D\u80FD\u5305\u542B\u7A7A\u683C\uFF01"))},trigger:"blur"}]},B=async()=>{const t=await S();n.value=t,console.log("leaderList.value:",n.value)},b=async()=>{var t,e;await((t=c.value)==null?void 0:t.validate()),i.value=="edit"?await I(u):await M(u),(e=r.value)==null||e.close(),p("success")},A=(t="add")=>{var e;i.value=t,(e=r.value)==null||e.open()},g=t=>{for(const e in u)t[e]!=null&&t[e]!=null&&(u[e]=t[e])},C=()=>{p("close")};return B(),V({open:A,setFormData:g}),(t,e)=>{const d=x,s=R,m=U,w=h,y=L,k=N;return _(),Y("div",G,[l(q,{ref_key:"popupRef",ref:r,title:z(v),async:!0,width:"550px",clickModalClose:!0,onConfirm:b,onClose:C},{default:a(()=>[l(k,{ref_key:"formRef",ref:c,model:u,"label-width":"84px",rules:D},{default:a(()=>[u.pid!==0?(_(),$(s,{key:0,label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"pid"},{default:a(()=>[l(d,{class:"flex-1",modelValue:u.pid,"onUpdate:modelValue":e[0]||(e[0]=o=>u.pid=o),data:n.value,clearable:"","node-key":"id",props:{value:"id",label:"name"},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data"])]),_:1})):j("",!0),l(s,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:a(()=>[l(m,{modelValue:u.name,"onUpdate:modelValue":e[1]||(e[1]=o=>u.name=o),modelModifiers:{trim:!0},placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u8D1F\u8D23\u4EBA"},{default:a(()=>[l(m,{modelValue:u.leader,"onUpdate:modelValue":e[2]||(e[2]=o=>u.leader=o),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u8054\u7CFB\u7535\u8BDD"},{default:a(()=>[l(m,{modelValue:u.mobile,"onUpdate:modelValue":e[3]||(e[3]=o=>u.mobile=o),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[F("div",null,[l(w,{modelValue:u.sort,"onUpdate:modelValue":e[4]||(e[4]=o=>u.sort=o)},null,8,["modelValue"]),H])]),_:1}),l(s,{label:"\u90E8\u95E8\u72B6\u6001"},{default:a(()=>[l(y,{modelValue:u.status,"onUpdate:modelValue":e[5]||(e[5]=o=>u.status=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{ee as _};
