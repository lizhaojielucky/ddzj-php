import{X as h,G as q,y as I,A as N,D as R,t as P,Q as S,S as $,B as M,u as G}from"./element-plus.62ab1451.js";import{u as H,a as Q}from"./vue-router.70b81833.js";import{c as X,d as j,e as z,f as J}from"./system.35501bbd.js";import{P as m}from"./enum.41ca2dbe.js";import{_ as K}from"./index.9d07e45b.js";import{d as L,r as d,_ as O,o as W,c as Y,V as u,M as o,T as b}from"./@vue.3ddec1b2.js";import{d as Z}from"./index.7e7d93d0.js";import"./@vueuse.b3730649.js";import"./lodash-es.32bc9704.js";import"./async-validator.fb49d0f5.js";import"./@element-plus.4237e19d.js";import"./dayjs.3f20994d.js";import"./axios.25713f9d.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.09c27007.js";import"./pinia.4a4088b7.js";import"./css-color-function.6cac4cf2.js";import"./color.aa9d0e7b.js";import"./clone.467d5f2b.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./ms.564e106c.js";import"./nprogress.73f6d097.js";import"./vue-clipboard3.8191fcdc.js";import"./clipboard.e51d27f9.js";import"./echarts.db1d6bb4.js";import"./zrender.84752e5a.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.d7b1dc3a.js";const ee={class:"substance_edit-help"},ue=L({__name:"edit",setup(ae){const p=d(),B=H(),c=Q(),n=d(m.ADD),_=d([]),e=d({id:"",name:"",type:1,command:"",expression:"",status:1,remark:"",params:""}),E=O({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:"blur"}],command:[{required:!0,message:"\u8BF7\u8F93\u5165\u547D\u4EE4",trigger:"blur"}],params:[{required:!0,message:"\u8BF7\u8F93\u5165\u53C2\u6570",trigger:"blur"}],expression:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219",trigger:"blur"}]}),x=l=>{!l||l.validate(a=>{if(a)switch(n.value){case m.ADD:C();return;case m.EDIT:g();return}})},V=()=>{e.value.expression!=""&&F()},F=async()=>{const l=await X({expression:e.value.expression});_.value=l},C=async()=>{await j(e.value),setTimeout(()=>c.go(-1),500)},g=async()=>{delete e.value.status_desc,delete e.value.type_desc,await z(e.value),setTimeout(()=>c.go(-1),500)},w=async()=>{const l=await J({id:e.value.id});e.value=l,F()},i=B.query;return i.mode&&(n.value=i.mode),n.value===m.EDIT&&(e.value.id=i.id*1,w()),(l,a)=>{const D=h,v=q,s=I,r=N,y=R,A=P,f=S,k=$,T=M,U=G;return W(),Y("div",ee,[u(v,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[u(D,{content:n.value=="add"?"\u65B0\u589E\u5B9A\u65F6\u4EFB\u52A1":"\u7F16\u8F91\u5B9A\u65F6\u4EFB\u52A1",onBack:a[0]||(a[0]=t=>l.$router.go(-1))},null,8,["content"])]),_:1}),u(v,{shadow:"never",class:"!border-none mt-4"},{default:o(()=>[u(T,{rules:E,ref_key:"formRef",ref:p,model:e.value,"label-width":"120px"},{default:o(()=>[u(r,{label:"\u540D\u79F0",prop:"name"},{default:o(()=>[u(s,{modelValue:e.value.name,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value.name=t),"show-word-limit":"",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",class:"max-w-[300px]"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u7C7B\u578B"},{default:o(()=>[u(y,{modelValue:e.value.type,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.type=t),label:1},{default:o(()=>[b("\u5B9A\u65F6\u4EFB\u52A1")]),_:1},8,["modelValue"])]),_:1}),u(r,{label:"\u547D\u4EE4",prop:"command"},{default:o(()=>[u(s,{modelValue:e.value.command,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value.command=t),class:"max-w-[300px]",placeholder:"\u8BF7\u8F93\u5165thinkphp\u547D\u4EE4\uFF0C\u5982vresion"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u53C2\u6570"},{default:o(()=>[u(s,{modelValue:e.value.params,"onUpdate:modelValue":a[4]||(a[4]=t=>e.value.params=t),class:"max-w-[300px]",placeholder:"\u8BF7\u8F93\u5165\u53C2\u6570\uFF0C\u4F8B:--id 8 --name \u6D4B\u8BD5"},null,8,["modelValue"])]),_:1}),u(r,{label:"\u72B6\u6001"},{default:o(()=>[u(A,{modelValue:e.value.status,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.status=t),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1}),u(r,{label:"\u89C4\u5219",prop:"expression"},{default:o(()=>[u(s,{onBlur:V,modelValue:e.value.expression,"onUpdate:modelValue":a[6]||(a[6]=t=>e.value.expression=t),class:"max-w-[300px]",placeholder:"\u8BF7\u8F93\u5165crontab\u89C4\u5219\uFF0C\u4F8B\uFF1A59 * * *"},null,8,["modelValue"])]),_:1}),u(r,null,{default:o(()=>[u(k,{ref:"paneTable",data:_.value,style:{"max-width":"500px"}},{default:o(()=>[u(f,{prop:"time",label:"\u5E8F\u53F7","min-width":"80"}),u(f,{prop:"date",label:"\u6267\u884C\u65F6\u95F4","min-width":"180"})]),_:1},8,["data"])]),_:1}),u(r,{label:"\u5907\u6CE8"},{default:o(()=>[u(s,{type:"textarea",class:"max-w-[300px]",modelValue:e.value.remark,"onUpdate:modelValue":a[7]||(a[7]=t=>e.value.remark=t),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1}),u(K,null,{default:o(()=>[u(U,{type:"primary",onClick:a[8]||(a[8]=t=>x(p.value))},{default:o(()=>[b("\u4FDD\u5B58")]),_:1})]),_:1})])}}});const Se=Z(ue,[["__scopeId","data-v-d4a4cf47"]]);export{Se as default};
